#ifndef GAME_H_
#define GAME_H_

#include "MainMenuState.h"

static const struct
{
    unsigned int  width;
    unsigned int  height;
    unsigned int  bytes_per_pixel; /* 2:RGB16, 3:RGB, 4:RGBA */
    unsigned char pixel_data[ 16 * 16 * 4 + 1 ];
} asteroids_icon = {
    16,
    16,
    4,
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\326\316"
    "\316\377\224ZR\377\234\224\214\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\357\367\357\377\245cc\377\224:R\377Z!)\377\326\326\326\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\346\346\346\377J{\224\377\061\234\377\377)J\204\377"
    "\265\265\255\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\305\305\305\377k\214\224"
    "\377\020{\346\377BZ\204\377\224\224\214\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\367\367\377\377\377\377\377"
    "\245\255\245\377\204\204k\377\204\214{\377ZZR\377ckc\377\377\377\377\377"
    "\377\367\367\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\245\245\377\326JJ\377\275\224"
    "\224\377\224\234\224\377\204\214s\377ccR\377JJB\377ccZ\377\346\245\245\377"
    "\214!!\377\255ZZ\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\305\255\234\377k{c\377cZR\377\214\224\204\377"
    "\224\234{\377kkc\377ZZR\377ZJJ\377\204JB\377RZR\377RJB\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\255\265"
    "\245\377k{k\377\204\061\061\377\265ZR\377k\204k\377kcR\377BJB\377Z)!\377\214"
    "\061)\377RZR\377JJJ\377\367\367\367\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\326\326\326\377\204\214{\377s{k\377kJ:\377\255JB\377\204\234"
    "\204\377{JB\377BB:\377Z:\061\377sRJ\377JRJ\377BB:\377\234\234\224\377\377"
    "\377\377\377\377\377\377\377\336\346\336\377{\204{\377s{R\377ck\031\377ZB"
    ":\377\255ZJ\377{\214s\377{J:\377BB:\377cBB\377cR:\377::\020\377::)\377\061"
    ":\061\377\275\275\275\377\377\377\377\377\255\224\204\377\265B:\377kcJ\377"
    "BZ\061\377J:B\377\224cZ\377\214\234\204\377kB\061\377JJJ\377kJJ\377ZBB\377"
    ")\061!\377)\061)\377k\061\061\377c::\377\326\336\326\377\326{{\377\357\316\316"
    "\377\346\214\204\377\326))\377\255:J\377\305\275\275\377\234\245\224\377"
    "s{k\377kkk\377\224\214\214\377\316Rc\377{\031\031\377\204\061)\377\346\316\316"
    "\377\275\204\204\377\367\255\255\377\377\377\377\377\377\377\377\377\377"
    "\367\367\377\377\346\346\377\377\357\357\377\377\377\377\377\377\377\377"
    "\377\204\224{\377\326\326\326\377\377\377\377\377\377\377\377\377\367\346"
    "\346\377\367\346\346\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\367\367\377\275kc\377\346\336\326\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
    "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377",
};

class Game
{
  public:
    //Constructors/Destructors
    Game();
    virtual ~Game();

    //Functions

    //Regular functions
    void EndApplication();

    //Update
    void UpdateDelta();
    void UpdateSFMLEvents();
    void Update();

    //Render functions
    void Render();

    //Core function
    void Run();

  private:
    GraphicsSettings                  gfx_settings_;
    ButtonSettings                    btn_settings_;
    StateData                         state_data_;
    std::unique_ptr<sf::RenderWindow> window_;
    sf::Event                         event_;

    sf::Clock clock_;
    float     delta_;

    std::stack<std::unique_ptr<State>> states_;

    std::map<SupportedKey_e, int> supported_keys_;

    //Inititalization
    void InitVariables();
    void InitSettings();
    void InitWindow();
    void InitKeys();
    void InitStateData();
    void InitStates();

    SupportedKey_e SelectEnum(std::string key);
};

#endif
